
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>cloudkickr</title>
  <meta name="author" content="Bent Cardan">

  
  <meta name="description" content="Rails 4.0.0.beta compiled for production feels faster than Rails 3 to me, especially when proxied by Nginx and initialized with Puma. To get started &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://cloudkickr.github.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="cloudkickr" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/"><img src="http://s3.amazonaws.com/cloudkickr/assets/images/clouds.png"></a></h1>
  
    <h2>giving you a taste.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:cloudkickr.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/about/">about</a></li>
  <li><a href="/">blog</a></li>
  <li><a href="/blog/archives">archives</a></li>
  


</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/29/rails-4.0.0.beta/">Using Rails 4.0.0.beta</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-29T05:02:00-04:00" pubdate data-updated="true">Jul 29<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Rails 4.0.0.beta compiled for production feels faster than Rails 3 to me, especially when proxied by Nginx and initialized with Puma. To get started, clone the master branch of Rails on github.  You&#8217;ll need ruby 1.9.3 and probably a public key linked to your github, as usual in all things of this nature.</p>

<figure class='code'><figcaption><span>pull down the master branch - clone.sh </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>git clone git://github.com/rails/rails.git
</span></code></pre></td></tr></table></div></figure>


<p>Let those edge railtie binaries generate a Rails 4 beta app from the freshly cloned repo.</p>

<figure class='code'><figcaption><span>generate the rails app - rails.sh </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>rails/railties/bin/rails new myrails4app --edge --skip-bundle --skip-test-unit
</span></code></pre></td></tr></table></div></figure>


<p>Contemplate the version of Ruby needed. Brief restraint from bundle here presents an opportunity to isolate and to manage gem dependencies.</p>

<figure class='code'><figcaption><span>rvm - rvmrc.sh </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>rvm --rvmrc --create 1.9.3@myrails4app
</span></code></pre></td></tr></table></div></figure>


<p>Add the puma gem for multithreaded processing.</p>

<figure class='code'><figcaption><span>adding puma - Gemfile </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>gem 'puma'</span></code></pre></td></tr></table></div></figure>


<p>Kick up your database.yml pools to any number your database can handle.</p>

<figure class='code'><figcaption><span>inside the config directory - database.yml </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="l-Scalar-Plain">database</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">db/development.sqlite3</span>
</span><span class='line'><span class="l-Scalar-Plain">pool</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">16</span>
</span></code></pre></td></tr></table></div></figure>


<p>Go bigger when you let puma loose if you like but be mindful that Puma&#8217;s multithread config numbers will always get capped by the pool size in your database.yml or whatever your database can handle. Pool represents max simultaneous data transactions into or out of the database. In general we want to increase the size of our pool wherever possible. Set your gems and run Bundle. Beyond this step it&#8217;s typical that you&#8217;ll need to start nudging bundle to help issue lazy or environment path deprived binaries underlying various processes with &#8216;bundle exec&#8217; or pass in &#8211;binstubs like:</p>

<figure class='code'><figcaption><span>generate the rails app - bundle.sh </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>bundle install --binstubs
</span></code></pre></td></tr></table></div></figure>


<p>Stop reading this and go bump up a rails app already and do what you do at this point. Heroku or something like that. Hit the <a href="http://edgeguides.rubyonrails.org/">edge guides</a> and google all the errors you don&#8217;t have a handle on. Check out the depth of content available in Rails error messaging while in development mode. After generating my first controller I would have never guessed there are new syntax contraints throughout the config/routes.rb file. Routes complained about how I matched the controller action, insisting that I preface all Get requests with Get. Not such a bad idea&#8230; uhh like where is the Match request in architecting a RESTful app? Play with the process queue initializer setting. Test multithreads with puma across your classes. RSpec can predict results and reign over potentially unmanageable complexity there. :)</p>

<p>Set your production.rb and review some of the other niceties available throughout your initializers. You could always proxy nginx to encounter multiple upstream Puma processes at the unix socket. I keep all my rails apps proxied by their own nginx.conf. Each to their own, so each rails app has a proxy file weighing less than ten lines of code in the config directory. Before showing you my nginx.conf file, it needs symbolicalic linking from within the Nginx sites-enabled directory to any random directory you decide to place your sym linked nginx.conf file. I put that thing in the config directory of a rails app. I surf clouds like tailspin on remote SSH like this:</p>

<figure class='code'><figcaption><span>symbolic link within sites-enabled directory to hit that app&#8217;s nginx.conf - link.sh </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>sudo ln -s /home/myusername/allmyedgeapps/myrails4app/config/nginx.conf myrails4app.com
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>Nginx - nginx.conf.sh </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>upstream myrails4app.com <span class="o">{</span>server unix:/tmp/myrails4app.sock <span class="nv">fail_timeout</span><span class="o">=</span>0;<span class="o">}</span>
</span><span class='line'>server <span class="o">{</span>
</span><span class='line'> server_name myrails4app.com www.myrails4app.com;
</span><span class='line'> root /home/myusername/allmyedgeapps/myrails4app/public;
</span><span class='line'> try_files <span class="nv">$uri</span>/index.html <span class="nv">$uri</span> @myrails4app.com;
</span><span class='line'> location @myrails4app.com <span class="o">{</span>
</span><span class='line'>  proxy_redirect off;
</span><span class='line'>  proxy_pass http://myrails4app.com;
</span><span class='line'> <span class="o">}</span>
</span><span class='line'> error_page 500 502 503 504 /500.html;
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Nginx will use port 80 by default so I wouldn&#8217;t even specify that in the nginx.conf files across all the rails apps sharing port 80. Now unleash that cat and initialize a multithreaded puma rails app, but keep in mind that all its incoming request objects are proxied and passed to puma to and from nginx. Just make sure the hand-off occurs at the same place or else they won&#8217;t be able to meet up and pass request and response objects in and out of the app.</p>

<figure class='code'><figcaption><span>let puma run multi-thread from the root directory of your rails app - puma.sh </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>puma -b unix:///tmp/myrails4app.sock
</span></code></pre></td></tr></table></div></figure>


<p>Go check your example.com, we used myrails4app.com in this discussion. You might forward domains or concatenate subdomians pointed to an IP address there for different things. Drawing from all this I hope you have a sense for the possiblities and found this post useful. Ryan Bates taught me how to do most of this stuff and he has a lot more good ideas to watch at railscast.com!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/07/29/jquery-effects/">Some jQuery Effects</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-07-29T02:27:00-04:00" pubdate data-updated="true">Jul 29<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I need to reference some simple JavaScript over here for a site I&#8217;m building. We&#8217;re going to review the basic jQuery effects and end up explaining method syntax.</p>

<figure class='code'><figcaption><span>Hide Method - hide.js </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">hide</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>This method hides all the elements in a jQuery object.</p>

<figure class='code'><figcaption><span>Timed Hide - hide.js </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">hide</span><span class="p">(</span><span class="nx">time</span><span class="p">)</span>
</span><span class='line'><span class="nx">hide</span><span class="p">(</span><span class="nx">time</span><span class="p">,</span> <span class="nx">easing</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Passing in the time constraint hides elements in a jQuery object over the duration with an optional easing style.</p>

<figure class='code'><figcaption><span>hide with function - hide.js </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">hide</span><span class="p">(</span><span class="nx">time</span><span class="p">,</span> <span class="kd">function</span><span class="p">)</span>
</span><span class='line'><span class="nx">hide</span><span class="p">(</span><span class="nx">time</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="kd">function</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Hide the elements in a jQuery object over the specified duration with an optional easing style and a function called when the effect is complete.</p>

<figure class='code'><figcaption><span>Show Method - show.js </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">show</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>This method shows all the elements in a jQuery object.</p>

<figure class='code'><figcaption><span>Timed show - show.js </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">show</span><span class="p">(</span><span class="nx">time</span><span class="p">)</span>
</span><span class='line'><span class="nx">show</span><span class="p">(</span><span class="nx">time</span><span class="p">,</span> <span class="nx">easing</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Passing in the time constraint shows elements in a jQuery object over the duration with an optional easing style.</p>

<figure class='code'><figcaption><span>show with function - show.js </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">show</span><span class="p">(</span><span class="nx">time</span><span class="p">,</span> <span class="kd">function</span><span class="p">)</span>
</span><span class='line'><span class="nx">show</span><span class="p">(</span><span class="nx">time</span><span class="p">,</span> <span class="nx">easing</span><span class="p">,</span> <span class="kd">function</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Show the elements in a jQuery object over the specified duration with an optional easing style and a function called when the effect is complete.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/19/sopa-whats-up-with-that/">SOPA: What&#8217;s Up With That?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-19T01:01:00-05:00" pubdate data-updated="true">Jan 19<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I think Wikipedia said it best.</p>

<blockquote><p>SOPA and PIPA are symptoms of a larger issue. They are misguided solutions to a misunderstood problem. In the U.S. and abroad, legislators and big media are embracing censorship and sacrificing civil liberties in their attacks on free knowledge and an open Internet.</p><footer><strong>Wikipedia</strong> <cite><a href='http://en.wikipedia.org/wiki/Wikipedia:SOPA_initiative/Learn_more'>SOPA initiative/Learn More</a></cite></footer></blockquote>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/01/04/Search-Engine/">Search Engine in Development</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-01-04T04:54:00-05:00" pubdate data-updated="true">Jan 4<span>th</span>, 2012</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Cloudkickr&#8217;s search engine is in Development through <a href="http://rubyonrails.org" target="_blank">Ruby on Rails</a>. Both Twitter and Groupon were built with Ruby on Rails. Our search engine architecture is designed for routekickr (the new site and app coming soon). <br/><br/>A search engine has three parts: Crawl, Index and Query. Crawl is similar to how your web browser gets you content to view while you&#8217;re surfing the internet. So the Crawl part of the search engine goes out and collects HTML pages. This data is indexed for query optimization. End-user interacts with query parameters to find the relevent result, so there has to be a decent and reasonable data mapping relating query params to index.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/31/happy-new-year/">Happy New Year!</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-31T19:23:00-05:00" pubdate data-updated="true">Dec 31<span>st</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>&#8230;from <a href="http://bent-cardan.com" target="_blank">Bent Cardan</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/30/ruby-on-rails-deployment-gitlab/">Ruby on Rails Deployment: Gitlab</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-30T21:50:00-05:00" pubdate data-updated="true">Dec 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Cloudkickr is pleased to tell about its recent successful GitLab deployment. <a target="_blank" href="http://gitlabhq.com/">GitlabHQ</a> is for anyone managing project source code or interested in greater version-control and visibility with Git. Based on <a target="_blank" href="http://rubyonrails.org/">Ruby on Rails</a>, GitLab is a free git repository management app. It&#8217;s your own lite app for projects/repositories hosting on your server. Moreover, it&#8217;s fast, secure and a stable solution built straight off the <a target="_blank" href="http://rubyonrails.org/">Ruby on Rails</a> framework.</p>

<p>See a live demo of cloudkickr&#8217;s deployment at <a href="http://fresh.gs.com" target="_blank">fresh.gs</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/12/30/surfacing-from-source/">Surfacing From Source</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-12-30T21:02:00-05:00" pubdate data-updated="true">Dec 30<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This blog is open-source and hosted by github. Framed by <a href="http://octopress.org">Octopress</a>. Origin <a href="https://github.com/cloudkickr/cloudkickr.github.com">here.<a/></p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/07/29/rails-4.0.0.beta/">Using Rails 4.0.0.beta</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/07/29/jquery-effects/">some jQuery effects</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/19/sopa-whats-up-with-that/">SOPA: What&#8217;s up with that?</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/01/04/Search-Engine/">Search Engine in development</a>
      </li>
    
      <li class="post">
        <a href="/blog/2011/12/31/happy-new-year/">Happy New Year!</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Github Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/bcardan">@bcardan</a> on Github
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'bcardan',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("bcardan", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/bcardan" class="twitter-follow-button" data-show-count="false">Follow @bcardan</a>
  
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Bent Cardan -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
